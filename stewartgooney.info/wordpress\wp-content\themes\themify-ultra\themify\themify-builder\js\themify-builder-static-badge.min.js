(function(d,f,g){g=wp.media;var h=/\x3c!--themify_builder_static--\x3e([\s\S]*?)\x3c!--\/themify_builder_static--\x3e/gi,k=/&lt;!--themify_builder_static--&gt;([\s\S]*?)&lt;!--\/themify_builder_static--&gt;/gi;wp.mce.views.register("themify-builder-static-badge",{template:g.template("themify-builder-static-badge"),bindNode:function(b,a){d(a).on("click",".themify-builder-mce-view-frontend-btn",this.goToFront).on("click",".themify-builder-mce-view-backend-btn",this.goToBack)},getContent:function(){return this.template({})},
match:function(b){var a=h.exec(b);b=k.exec(b);if(a||b)return a=f.isNull(a)?b:a,{index:a.index,content:a[0],options:{}}},View:{className:"themify-builder-static-badge",template:g.template("themify-builder-static-badge"),getHtml:function(){return this.template({})}},edit:function(b){this.goToFront()},goToFront:function(){d("#themify_builder_switch_frontend").trigger("click")},goToBack:function(){themifybuilderapp._backendBuilderFocus()}});wp.mce.views._tb_static_content={setContent:function(b,a){tinyMCE&&
tinyMCE.activeEditor?tinyMCE.activeEditor.hidden?d("#content").val(a):b.setContent(a):b.val(a)}};d(document).on("tinymce-editor-init",function(b,a){var c;a.wp&&a.wp._createToolbar&&(c=a.wp._createToolbar(["wp_view_edit"]));if(c)a.on("wptoolbar",function(b){a.dom.hasClass(b.element,"wpview")&&"themify-builder-static-badge"===a.dom.getAttrib(b.element,"data-wpview-type")&&(b.toolbar=c)});a.setContent(wp.mce.views.setMarkers(a.getContent()));a.on("beforesetcontent",function(a){a.content=wp.mce.views.setMarkers(a.content)})});
d("body").on("themify_builder_save_data",function(b,a,c){if(f.isEmpty(a.data.static_content))return!0;if(tinyMCE&&tinyMCE.activeEditor){var e=tinyMCE.activeEditor;c=!1===tinyMCE.activeEditor.hidden?tinyMCE.activeEditor.getContent():tinymce.DOM.get("content").value}else e=d("#content"),c=e.val();b=h.exec(c);f.isNull(b)?wp.mce.views._tb_static_content.setContent(e,c+a.data.static_content):wp.mce.views._tb_static_content.setContent(e,c.replace(b[0],a.data.static_content))})})(jQuery,_,Backbone);
